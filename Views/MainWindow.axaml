<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:DeepTime.LithoMind.Desktop.ViewModels"
        xmlns:core="using:LithoMind.Core.Models.UI"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="800"
        x:Class="DeepTime.LithoMind.Desktop.Views.MainWindow"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="岩相古地理数智化重建系统 - CNOOC原型V2版"
        Background="#F3F3F3"
        xmlns:conv="using:DeepTime.LithoMind.Desktop.Converters" > 


    <Window.Styles>
        <Style Selector="Menu">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Height" Value="28"/>
        </Style>
        <Style Selector="MenuItem">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10,4"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="MenuItem:pointerover /template/ ContentPresenter#PART_HeaderPresenter">
            <Setter Property="Background" Value="#EAEAEA"/>
            <Setter Property="Foreground" Value="#000000"/>
        </Style>
    </Window.Styles>

    <DockPanel LastChildFill="True">

        <StackPanel DockPanel.Dock="Top" Spacing="0">
            
            <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
                <Menu ItemsSource="{Binding MenuItems}">
                    <Menu.Styles>
                        <Style Selector="MenuItem" x:DataType="core:MenuItemModel">
                            <Setter Property="Header" Value="{Binding Header}"/>
                            <Setter Property="Command" Value="{Binding Command}"/>
                            <Setter Property="InputGesture" Value="{Binding InputGesture}"/>
                            <Setter Property="ItemsSource" Value="{Binding Children}"/>
                            <Setter Property="Icon" Value="{Binding Icon, Converter={StaticResource EmojiIconConverter}}"/>
                            <Setter Property="Background" Value="Transparent"/>
                        </Style>
                    </Menu.Styles>
                </Menu>
            </Border>

            <Border Background="#F9F9F9" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1" Padding="4,2">
                <Menu ItemsSource="{Binding ToolbarItems}" Background="Transparent">
                    <Menu.Styles>
                        <Style Selector="MenuItem" x:DataType="core:MenuItemModel">
                            <Setter Property="Header" Value="{Binding Header}"/>
                            <Setter Property="Command" Value="{Binding Command}"/>
                            <Setter Property="ItemsSource" Value="{Binding Children}"/>
                            
                            <Setter Property="Tag" Value="{Binding IsSeparator}"/>

                            <Setter Property="Icon" Value="{Binding Icon, Converter={StaticResource EmojiIconConverter}}"/>

                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Foreground" Value="#333333"/>
                            <Setter Property="FontSize" Value="12"/>
                            <Setter Property="Padding" Value="10,6"/>
                            <Setter Property="CornerRadius" Value="4"/>
                            <Setter Property="Margin" Value="2,0"/>
                            <Setter Property="Cursor" Value="Hand"/>
                        </Style>

                        <Style Selector="MenuItem[Tag=True]" x:DataType="core:MenuItemModel">
                            <Setter Property="Template">
                                <ControlTemplate>
                                    <Rectangle Width="1" Height="16" Fill="#CCCCCC" Margin="6,0" VerticalAlignment="Center"/>
                                </ControlTemplate>
                            </Setter>
                            <Setter Property="IsEnabled" Value="False"/>
                            <Setter Property="IsHitTestVisible" Value="False"/>
                        </Style>

                        <Style Selector="MenuItem[Tag=False]:pointerover /template/ ContentPresenter#PART_HeaderPresenter">
                            <Setter Property="Background" Value="#EAEAEA"/>
                            <Setter Property="Foreground" Value="#000000"/>
                        </Style>
                    </Menu.Styles>
                </Menu>
            </Border>
            
        </StackPanel>

        <Border DockPanel.Dock="Bottom" Height="50" Background="#FFFFFF" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <ListBox ItemsSource="{Binding Pages}" 
                     SelectedItem="{Binding CurrentPage}"
                     Background="Transparent"
                     VerticalAlignment="Stretch">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="0"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center" Margin="12,0">
                            <TextBlock Text="{Binding IconKey}" FontSize="16" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding Title}" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.Styles>
                    <Style Selector="ListBoxItem">
                        <Setter Property="Foreground" Value="#666666"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Padding" Value="12,6"/>
                        <Setter Property="CornerRadius" Value="4"/>
                        <Setter Property="Margin" Value="2,4"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                    </Style>
                    <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                        <Setter Property="Foreground" Value="#0078D4"/>
                        <Setter Property="Background" Value="#E6F2FF"/>
                    </Style>
                </ListBox.Styles>
            </ListBox>
        </Border>

        <TransitioningContentControl Content="{Binding CurrentPage}">
            <TransitioningContentControl.PageTransition>
                <CrossFade Duration="0:00:00.200" />
            </TransitioningContentControl.PageTransition>
        </TransitioningContentControl>

    </DockPanel>
</Window>