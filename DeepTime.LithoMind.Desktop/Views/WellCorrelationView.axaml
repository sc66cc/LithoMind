<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DeepTime.LithoMind.Desktop.ViewModels.Pages"
             x:Class="DeepTime.LithoMind.Desktop.Views.WellCorrelationView"
             x:DataType="vm:WellCorrelationViewModel">
    
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="8">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- å·¦ä¾§æ ‡é¢˜ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="ðŸ“ˆ" FontSize="16" VerticalAlignment="Center"/>
                    <TextBlock Text="è”äº•å‰–é¢å›¾" FontSize="14" Foreground="White" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Text="-" FontSize="14" Foreground="#7F8C8D" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding SectionName}" FontSize="14" Foreground="#1ABC9C" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- å³ä¾§å·¥å…·æŒ‰é’® -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="4">
                    <!-- æ˜¾ç¤ºå±‚ä½ -->
                    <CheckBox Content="å±‚ä½" 
                              IsChecked="{Binding ShowHorizonMarkers}"
                              Foreground="White"
                              FontSize="11"
                              VerticalAlignment="Center"/>
                    <!-- æ˜¾ç¤ºæ²‰ç§¯ç›¸ -->
                    <CheckBox Content="æ²‰ç§¯ç›¸" 
                              IsChecked="{Binding ShowFacies}"
                              Foreground="White"
                              FontSize="11"
                              VerticalAlignment="Center"
                              Margin="10,0,10,0"/>
                    <!-- åˆ†éš”çº¿ -->
                    <Border Width="1" Background="#7F8C8D" Margin="4,2"/>
                    <!-- æ”¾å¤§æŒ‰é’® -->
                    <Button Content="ðŸ”+" 
                            ToolTip.Tip="æ”¾å¤§"
                            Command="{Binding ZoomInCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                    <!-- ç¼©æ”¾æ¯”ä¾‹æ˜¾ç¤º -->
                    <Border Background="#34495E" CornerRadius="4" Padding="8,4" VerticalAlignment="Center">
                        <TextBlock Text="{Binding ZoomLevelText}" 
                                   FontSize="12" 
                                   Foreground="White"
                                   MinWidth="45"
                                   TextAlignment="Center"/>
                    </Border>
                    <!-- ç¼©å°æŒ‰é’® -->
                    <Button Content="ðŸ”-" 
                            ToolTip.Tip="ç¼©å°"
                            Command="{Binding ZoomOutCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                    <!-- é‡ç½®ç¼©æ”¾æŒ‰é’® -->
                    <Button Content="ðŸŽ¯" 
                            ToolTip.Tip="é‡ç½®è§†å›¾"
                            Command="{Binding ResetZoomCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <Border Grid.Row="1" Background="#F5F5F5" ClipToBounds="True">
            <Grid>
                <!-- å³ä¾§å‰–é¢å›¾æ˜¾ç¤ºåŒºåŸŸ -->
                <ScrollViewer HorizontalScrollBarVisibility="Auto" 
                              VerticalScrollBarVisibility="Auto">
                    <Grid>
                        <!-- æ— å›¾ç‰‡æç¤º -->
                        <StackPanel IsVisible="{Binding !HasImage}"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“ˆ" FontSize="60" HorizontalAlignment="Center"/>
                            <TextBlock Text="è”äº•å‰–é¢å›¾" FontSize="18" Foreground="#2C3E50" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                            <TextBlock Text="é€‰æ‹©äº•ä½ç”Ÿæˆå‰–é¢å›¾" FontSize="14" Foreground="#7F8C8D" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                        </StackPanel>
                        
                        <!-- å‰–é¢å›¾å›¾ç‰‡ -->
                        <Image Source="{Binding SectionImage}"
                               IsVisible="{Binding HasImage}"
                               Stretch="None"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top">
                            <Image.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform ScaleX="{Binding ZoomLevel}" 
                                                   ScaleY="{Binding ZoomLevel}"/>
                                    <TranslateTransform X="{Binding PanOffsetX}"
                                                       Y="{Binding PanOffsetY}"/>
                                </TransformGroup>
                            </Image.RenderTransform>
                        </Image>
                    </Grid>
                </ScrollViewer>

                <!-- äº•é€‰æ‹©å¯¹è¯æ¡† -->
                <Border IsVisible="{Binding ShowWellSelector}"
                        Background="#CC000000">
                    <Border Background="White"
                            CornerRadius="8"
                            Margin="100"
                            Padding="20"
                            MaxWidth="400"
                            MaxHeight="500"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <!-- æ ‡é¢˜ -->
                            <TextBlock Grid.Row="0"
                                       Text="é€‰æ‹©å‚ä¸Žè”äº•çš„äº•"
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#2C3E50"
                                       Margin="0,0,0,15"/>

                            <!-- äº•åˆ—è¡¨ -->
                            <ScrollViewer Grid.Row="1" MaxHeight="300">
                                <ItemsControl ItemsSource="{Binding Wells}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#F5F5F5"
                                                    CornerRadius="4"
                                                    Padding="12,8"
                                                    Margin="0,0,0,8">
                                                <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}">
                                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                                        <TextBlock Text="ðŸ›¢ï¸" FontSize="14"/>
                                                        <TextBlock Text="{Binding Name}"
                                                                   FontSize="13"
                                                                   VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </CheckBox>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>

                            <!-- æŒ‰é’®åŒº -->
                            <StackPanel Grid.Row="2"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Spacing="10"
                                        Margin="0,15,0,0">
                                <Button Content="å…¨é€‰"
                                        Command="{Binding SelectAllWellsCommand}"
                                        Padding="20,8"
                                        FontSize="13"/>
                                <Button Content="æ¸…ç©º"
                                        Command="{Binding DeselectAllWellsCommand}"
                                        Padding="20,8"
                                        FontSize="13"/>
                                <Button Content="å–æ¶ˆ"
                                        Command="{Binding CancelWellSelectionCommand}"
                                        Padding="20,8"
                                        FontSize="13"/>
                                <Button Content="ç¡®å®š"
                                        Command="{Binding ConfirmWellSelectionCommand}"
                                        Background="#3498DB"
                                        Foreground="White"
                                        Padding="20,8"
                                        FontSize="13"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Border>
            </Grid>
        </Border>
        
        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Grid.Row="2" Background="#ECF0F1" Padding="8,6">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="å‰–é¢å:" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBlock Text="{Binding SectionName}" FontSize="11" Foreground="#2C3E50" FontWeight="SemiBold"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="å‚ä¸Žäº•æ•°:" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBlock FontSize="11" Foreground="#2C3E50">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0} å£">
                                    <Binding Path="Wells.Count"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
                <TextBlock Grid.Column="1" 
                           Text="æ»šè½®ç¼©æ”¾ | æ‹–æ‹½å¹³ç§»" 
                           FontSize="10" 
                           Foreground="#95A5A6"/>
            </Grid>
        </Border>
    </Grid>
</UserControl>
