<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DeepTime.LithoMind.Desktop.ViewModels.Pages"
             x:Class="DeepTime.LithoMind.Desktop.Views.WellColumnView"
             x:DataType="vm:WellColumnViewModel">
    
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="8">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- å·¦ä¾§æ ‡é¢˜ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="ðŸ“Š" FontSize="16" VerticalAlignment="Center"/>
                    <TextBlock Text="å•äº•ç»¼åˆæŸ±çŠ¶å›¾" FontSize="14" Foreground="White" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Text="-" FontSize="14" Foreground="#7F8C8D" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding WellName}" FontSize="14" Foreground="#3498DB" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- å³ä¾§å·¥å…·æŒ‰é’® -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="4">
                    <!-- æ”¾å¤§æŒ‰é’® -->
                    <Button Content="ðŸ”+" 
                            ToolTip.Tip="æ”¾å¤§"
                            Command="{Binding ZoomInCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                    <!-- ç¼©æ”¾æ¯”ä¾‹æ˜¾ç¤º -->
                    <Border Background="#34495E" CornerRadius="4" Padding="8,4" VerticalAlignment="Center">
                        <TextBlock Text="{Binding ZoomLevelText}" 
                                   FontSize="12" 
                                   Foreground="White"
                                   MinWidth="45"
                                   TextAlignment="Center"/>
                    </Border>
                    <!-- ç¼©å°æŒ‰é’® -->
                    <Button Content="ðŸ”-" 
                            ToolTip.Tip="ç¼©å°"
                            Command="{Binding ZoomOutCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                    <!-- åˆ†éš”çº¿ -->
                    <Border Width="1" Background="#7F8C8D" Margin="4,2"/>
                    <!-- é‡ç½®ç¼©æ”¾æŒ‰é’® -->
                    <Button Content="ðŸŽ¯" 
                            ToolTip.Tip="é‡ç½®ç¼©æ”¾ (1:1)"
                            Command="{Binding ResetZoomCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ä¸»å†…å®¹åŒº - æŸ±çŠ¶å›¾æ˜¾ç¤º -->
        <Border Grid.Row="1" Background="#F5F5F5" ClipToBounds="True">
            <Grid ColumnDefinitions="Auto,*">
                <!-- å·¦ä¾§æ›²çº¿é“æŽ§åˆ¶é¢æ¿ -->
                <Border Grid.Column="0" Background="#ECF0F1" Width="120" Padding="5">
                    <ScrollViewer>
                        <StackPanel Spacing="5">
                            <TextBlock Text="æ›²çº¿é“" FontSize="12" FontWeight="Bold" Foreground="#2C3E50" Margin="5"/>
                            <ItemsControl ItemsSource="{Binding LogTracks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="White" CornerRadius="4" Padding="5" Margin="2">
                                            <CheckBox IsChecked="{Binding IsVisible, Mode=TwoWay}">
                                                <StackPanel Orientation="Horizontal" Spacing="5">
                                                    <Border Width="12" Height="12" CornerRadius="2">
                                                        <Border.Background>
                                                            <SolidColorBrush Color="{Binding Color}"/>
                                                        </Border.Background>
                                                    </Border>
                                                    <TextBlock Text="{Binding Name}" FontSize="11" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </CheckBox>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
                
                <!-- å³ä¾§æŸ±çŠ¶å›¾æ˜¾ç¤ºåŒºåŸŸ - å±…ä¸­æ˜¾ç¤º -->
                <Border Grid.Column="1" Background="#F5F5F5" ClipToBounds="True">
                    <!-- å³é”®èœå• -->
                    <Border.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="æ–°å¢žé“">
                                <MenuItem Header="ðŸ“ æ·±åº¦é“" Command="{Binding AddDepthTrackCommand}"/>
                                <MenuItem Header="ðŸ“ æ–‡æœ¬é“" Command="{Binding AddTextTrackCommand}"/>
                                <MenuItem Header="ðŸ“ˆ æ›²çº¿é“" Command="{Binding AddCurveTrackCommand}"/>
                                <MenuItem Header="ðŸ“Š è§£é‡Šé“" Command="{Binding AddInterpretationTrackCommand}"/>
                                <MenuItem Header="ðŸª¨ å²©æ€§é“" Command="{Binding AddLithologyTrackCommand}"/>
                            </MenuItem>
                            <Separator/>
                            <MenuItem Header="ðŸ”„ é‡ç½®ç¼©æ”¾" Command="{Binding ResetZoomCommand}"/>
                        </ContextMenu>
                    </Border.ContextMenu>
                    <ScrollViewer x:Name="ColumnScrollViewer"
                                  HorizontalScrollBarVisibility="Auto" 
                                  VerticalScrollBarVisibility="Auto">
                        <Grid HorizontalAlignment="Center" VerticalAlignment="Center" MinWidth="400">
                            <!-- æ— å›¾ç‰‡æç¤º -->
                            <StackPanel IsVisible="{Binding !HasImage}"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ“Š" FontSize="60" HorizontalAlignment="Center"/>
                                <TextBlock Text="å•äº•ç»¼åˆæŸ±çŠ¶å›¾" FontSize="18" Foreground="#2C3E50" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                                <TextBlock Text="é€‰æ‹©äº•ä½æŸ¥çœ‹æŸ±çŠ¶å›¾" FontSize="14" Foreground="#7F8C8D" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <!-- æŸ±çŠ¶å›¾å›¾ç‰‡ - å±…ä¸­ -->
                            <Image Source="{Binding ColumnImage}"
                                   IsVisible="{Binding HasImage}"
                                   Stretch="None"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center">
                                <Image.RenderTransform>
                                    <ScaleTransform ScaleX="{Binding ZoomLevel}" 
                                                   ScaleY="{Binding ZoomLevel}"/>
                                </Image.RenderTransform>
                            </Image>
                        </Grid>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Border>
        
        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Grid.Row="2" Background="#ECF0F1" Padding="8,6">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="äº•å:" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBlock Text="{Binding WellName}" FontSize="11" Foreground="#2C3E50" FontWeight="SemiBold"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="æ·±åº¦èŒƒå›´:" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBlock FontSize="11" Foreground="#2C3E50">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0:F0}m - {1:F0}m">
                                    <Binding Path="DepthStart"/>
                                    <Binding Path="DepthEnd"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="é“æ•°:" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBlock Text="{Binding LogTracks.Count}" FontSize="11" Foreground="#2C3E50"/>
                    </StackPanel>
                </StackPanel>
                <TextBlock Grid.Column="1" 
                           Text="å³é”®æ–°å¢žé“ | æ»šè½®ç¼©æ”¾ | æ‹–æ‹½å¹³ç§»" 
                           FontSize="10" 
                           Foreground="#95A5A6"/>
            </Grid>
        </Border>
    </Grid>
</UserControl>
